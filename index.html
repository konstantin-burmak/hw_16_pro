<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>homework16</title>
</head>

<body>
    <script>
        function fibonachiFoo() {
            const cache = new Map();
            console.log('Cache ', cache);

            return (n) => {
                const result = [];

                function* fibonacci() {
                    [a, b] = [0, 1]
                    while (true) {
                        yield a;
                        [a, b] = [b, a + b];
                    }
                }

                let fi = fibonacci();

                for (let i = 0; i < n; i++) {
                    result.push(fi.next().value);
                };

                if (!cache.has(n)) {
                    cache.set(n, result);
                    console.log('No cached array: ', cache.get(n));
                } else if (cache.has(n)) {
                    console.log('Cached array: ', cache.get(n));
                }
                
                return fi;
            }
        }
            

        const fibo = fibonachiFoo();
        const fibo1 = fibo(5);
        const fibo2 = fibo(6);
        const fibo4 = fibo(6);
        const fibo5 = fibo(15);
        const fibo6 = fibo(15);

    </script>
</body>
</html>